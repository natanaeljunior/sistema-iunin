<div class="view-wrapper" style="margin: 5px">

  <dx-data-grid
                #dataGridAnaliseLeite
                noDataText=""
                height="100%"
                [dataSource]="this.dataSource"
                [allowColumnResizing]="true"
                [allowColumnReordering]="true"
                [columnResizingMode]="'widget'"
                [focusedRowEnabled]="true"
                (onRowClick)="rowClick($event)"
                (onExporting)="onExporting($event)"
                [hoverStateEnabled]="true"
                [showBorders]="true"
                [rowAlternationEnabled]="true"
                [repaintChangesOnly]="true"
                [editing]="{allowAdding:true, allowDeleting:true, allowUpdating:true, mode:'form', useIcons:true, refreshMode: 'full'}"
  >

    <dxo-paging [pageSize]="15"></dxo-paging>
    <dxo-pager
      [visible]="true"
      [showPageSizeSelector]="true"
      [showNavigationButtons]="true"
      [showInfo]="true">

    </dxo-pager>
    <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>
    <dxo-header-filter [visible]="false"></dxo-header-filter>
    <dxo-filter-row  [visible]="true" ></dxo-filter-row>
<!--    <dxo-load-panel [showPane]="true"></dxo-load-panel>-->
    <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>

    <dxo-selection
      selectAllMode="allPages"
      showCheckBoxesMode="always"
      mode="single"
    ></dxo-selection>
    <dxo-sorting mode="multiple"></dxo-sorting>

    <dxo-search-panel
      [visible]="true"
      placeholder="Pesquisar Análises"
    ></dxo-search-panel>
    <dxo-column-chooser [enabled]="true"  [mode]="'select'"></dxo-column-chooser>
    <dxo-export
      [enabled]="true"
      [allowExportSelectedData]="true"
      [formats]="['xlsx', 'pdf']"
    >
    </dxo-export>

    <dxi-column *ngFor="let column of analiseLeiteColumns"
                [dataField]="column.dataField"
                [caption]="column.caption"
                [dataType]="column.dataType"
                [format]="column.format"
                [editorOptions]="column.editorOptions">
      <dxi-validation-rule *ngIf="column.validationRules"
                           [type]="column.validationRules[0].type"
                           [message]="column.validationRules[0].message">
      </dxi-validation-rule>
    </dxi-column>

    <dxi-column caption="Ações" type="buttons" [width]="110">
      <dxi-button name="edit"></dxi-button>
      <dxi-button name="delete"></dxi-button>
    </dxi-column>

    <dxo-summary>
      <dxi-total-item column="origem_amostra" displayFormat="Total" alignment="center" ></dxi-total-item>
      <dxi-total-item column="origem_amostra" summaryType="count" displayFormat="{0}" alignment="center"> </dxi-total-item>

      <dxi-total-item column="data_coleta" displayFormat="Última Coleta" alignment="center" ></dxi-total-item>
      <dxi-total-item column="data_coleta" summaryType="max"  valueFormat="dd/MM/yy" displayFormat="{0}" alignment="center"> </dxi-total-item>

      <dxi-total-item column="data_avaliacao" displayFormat="Última Avaliação" alignment="center" ></dxi-total-item>
      <dxi-total-item column="data_avaliacao" summaryType="max"  valueFormat="dd/MM/yy" displayFormat="{0}" alignment="center"> </dxi-total-item>

      <dxi-total-item column="ccs" displayFormat="Média" alignment="center" ></dxi-total-item>
      <dxi-total-item column="ccs" summaryType="avg" valueFormat="#.#" displayFormat="{0}" alignment="center"> </dxi-total-item>


      <dxi-total-item column="cbt" displayFormat="Média" alignment="center" ></dxi-total-item>
      <dxi-total-item column="cbt" summaryType="avg" valueFormat="#.#" displayFormat="{0}" alignment="center"> </dxi-total-item>

      <dxi-total-item column="ph" displayFormat="Média" alignment="center" ></dxi-total-item>
      <dxi-total-item column="ph" summaryType="avg" valueFormat="#.#" displayFormat="{0}" alignment="center"> </dxi-total-item>
    </dxo-summary>
  </dx-data-grid>
</div>
